# 💪 최강 해결법: 데이터베이스 직접 수정

## 🎯 이 방법은 100% 작동합니다!

WordPress 설정이 제대로 안 바뀌는 경우, 데이터베이스를 직접 수정하면 확실합니다.

---

## 🔧 방법 1: phpMyAdmin으로 수정 (가장 확실)

### 1단계: phpMyAdmin 접속

**호스팅 제공업체 cPanel에서:**
```
cPanel 로그인 → "데이터베이스" 섹션 → "phpMyAdmin" 클릭
```

**또는 직접 접속:**
```
https://your-hosting.com/phpmyadmin
또는
https://cms.pnamarketing.co.kr:2083/cpsess.../phpMyAdmin
```

### 2단계: WordPress 데이터베이스 선택

왼쪽 목록에서 WordPress 데이터베이스 클릭:
```
일반적인 이름: wp_, wordpress_, cms_ 등으로 시작
```

### 3단계: SQL 탭 클릭

상단 메뉴에서 **"SQL"** 탭 클릭

### 4단계: 아래 SQL 코드 복사 → 붙여넣기 → 실행

```sql
-- 1. 현재 설정 확인
SELECT * FROM wp_options WHERE option_name IN ('siteurl', 'home');

-- 2. 도메인을 cms로 강제 변경
UPDATE wp_options 
SET option_value = 'https://cms.pnamarketing.co.kr' 
WHERE option_name = 'siteurl';

UPDATE wp_options 
SET option_value = 'https://cms.pnamarketing.co.kr' 
WHERE option_name = 'home';

-- 3. 변경 확인
SELECT * FROM wp_options WHERE option_name IN ('siteurl', 'home');
```

**⚠️ 중요:** 테이블 접두사가 `wp_`가 아닐 수 있습니다!
- `wp_options` 대신 `wordpress_options` 또는 다른 이름일 수 있음
- 왼쪽 테이블 목록에서 `_options`로 끝나는 테이블 찾기

### 5단계: 실행 결과 확인

```
✅ "1 row affected" 또는 "영향받은 행: 1" 메시지가 나타나면 성공!
```

---

## 🔧 방법 2: WP-CLI로 수정 (SSH 접근 가능한 경우)

### SSH로 서버 접속 후:

```bash
# WordPress 루트 폴더로 이동
cd /path/to/wordpress

# 도메인 확인
wp option get siteurl
wp option get home

# 도메인 변경
wp option update siteurl 'https://cms.pnamarketing.co.kr'
wp option update home 'https://cms.pnamarketing.co.kr'

# 변경 확인
wp option get siteurl
wp option get home
```

---

## 🔧 방법 3: wp-config.php 강제 설정 (가장 안전)

### FTP 또는 파일 관리자로:

1. **WordPress 루트 폴더** 이동
2. **wp-config.php** 파일 열기
3. **`<?php` 바로 아래에 추가:**

```php
<?php
// 도메인 강제 설정 (데이터베이스 값 무시)
define('WP_HOME', 'https://cms.pnamarketing.co.kr');
define('WP_SITEURL', 'https://cms.pnamarketing.co.kr');

// 기존 코드 계속...
```

4. **저장**

**이 방법의 장점:**
- 데이터베이스 값과 관계없이 강제로 도메인 고정
- 가장 안전하고 확실한 방법
- 백업 불필요 (언제든 이 2줄만 삭제하면 원상복구)

---

## 🔧 방법 4: Better Search Replace 플러그인

### 플러그인으로 URL 전체 교체:

1. **플러그인 → 새로 추가**
2. **"Better Search Replace" 검색 → 설치 → 활성화**
3. **도구 → Better Search Replace**

4. **설정:**
```
Search for:    https://pnamarketing.co.kr
Replace with:  https://cms.pnamarketing.co.kr

Select tables: 모든 테이블 선택

Run as dry run: ✓ (체크 - 먼저 테스트)
```

5. **"Run Search/Replace" 클릭** → 결과 확인

6. **실제 적용:**
```
Run as dry run: ✗ (체크 해제)
"Run Search/Replace" 클릭
```

---

## ✅ 변경 후 확인

### 1. WordPress 재로그인
```
https://cms.pnamarketing.co.kr/wp-admin
```

### 2. 설정 → 일반 확인
```
WordPress 주소(URL): https://cms.pnamarketing.co.kr ✓
사이트 주소(URL):    https://cms.pnamarketing.co.kr ✓
```

### 3. Elementor 편집기 열기
```
페이지 → 모든 페이지 → "Elementor로 편집"
```

### 4. F12 → Console 확인
```
✅ CORS 에러 사라짐
✅ SecurityError 사라짐
```

---

## 🆘 백업 방법

### 데이터베이스 백업 (수정 전 필수!)

#### phpMyAdmin에서:
1. 데이터베이스 선택
2. 상단 "내보내기" 탭 클릭
3. "실행" 클릭
4. `.sql` 파일 다운로드

#### 복구가 필요하면:
1. phpMyAdmin → "가져오기" 탭
2. 백업 파일 선택 → "실행"

---

## 📋 SQL 쿼리 전체 (한번에 실행)

```sql
-- ============================================
-- WordPress 도메인 완전 변경 (CORS 해결)
-- ============================================

-- 1. 백업 (현재 값 확인)
SELECT 'BACKUP', option_name, option_value 
FROM wp_options 
WHERE option_name IN ('siteurl', 'home');

-- 2. 도메인 변경
UPDATE wp_options 
SET option_value = REPLACE(option_value, 'https://pnamarketing.co.kr', 'https://cms.pnamarketing.co.kr')
WHERE option_name IN ('siteurl', 'home');

-- 3. 게시물 내용 URL 변경
UPDATE wp_posts 
SET post_content = REPLACE(post_content, 'https://pnamarketing.co.kr', 'https://cms.pnamarketing.co.kr');

-- 4. GUID 변경 (선택사항)
UPDATE wp_posts 
SET guid = REPLACE(guid, 'https://pnamarketing.co.kr', 'https://cms.pnamarketing.co.kr');

-- 5. 메타 데이터 변경
UPDATE wp_postmeta 
SET meta_value = REPLACE(meta_value, 'https://pnamarketing.co.kr', 'https://cms.pnamarketing.co.kr')
WHERE meta_value LIKE '%pnamarketing.co.kr%';

-- 6. Elementor 메타 데이터 (JSON 형식)
UPDATE wp_postmeta 
SET meta_value = REPLACE(meta_value, 'https:\\/\\/pnamarketing.co.kr', 'https:\\/\\/cms.pnamarketing.co.kr')
WHERE meta_key LIKE '_elementor%';

-- 7. 최종 확인
SELECT 'RESULT', option_name, option_value 
FROM wp_options 
WHERE option_name IN ('siteurl', 'home');
```

**⚠️ 주의:** `wp_` 접두사를 실제 데이터베이스 접두사로 변경하세요!

---

## 🎯 이 방법이 안 될 경우는 없습니다!

1. **wp-config.php 강제 설정** (가장 추천!)
2. **phpMyAdmin SQL 실행**
3. **Better Search Replace 플러그인**

**셋 중 하나는 반드시 작동합니다!**

어떤 방법을 시도하셨는지 알려주시면 더 도와드리겠습니다! 💪



