# ğŸš¨ Elementor CORS ì—ëŸ¬ ì™„ì „ í•´ê²° ê°€ì´ë“œ

## ğŸ¯ ë‹¹ì‹ ì˜ ì—ëŸ¬ ì›ì¸

```
âŒ CORS policy: The 'Access-Control-Allow-Origin' header has a value 
   'https://pnamarketing.co.kr' that is not equal to the supplied origin 
   'https://cms.pnamarketing.co.kr'
```

**ë¬¸ì œ:** WordPress ì„¤ì •ì—ì„œ ë„ë©”ì¸ì´ `pnamarketing.co.kr`ì¸ë°, ì‹¤ì œ ì ‘ì†ì€ `cms.pnamarketing.co.kr`ë¡œ í•˜ê³  ìˆì–´ì„œ ì¶©ëŒ!

---

## âš¡ ì¦‰ì‹œ ì‹¤í–‰ (ìˆœì„œëŒ€ë¡œ!)

### âœ… STEP 1: WordPress ë„ë©”ì¸ í†µì¼ (5ë¶„)

1. **WordPress ê´€ë¦¬ì ì ‘ì†:**
   ```
   https://cms.pnamarketing.co.kr/wp-admin
   ```

2. **ì„¤ì • â†’ ì¼ë°˜**

3. **ë‘ í•­ëª©ì„ ë™ì¼í•˜ê²Œ ì„¤ì •:**
   ```
   WordPress ì£¼ì†Œ(URL): https://cms.pnamarketing.co.kr
   ì‚¬ì´íŠ¸ ì£¼ì†Œ(URL):    https://cms.pnamarketing.co.kr
   ```
   **âš ï¸ ì¤‘ìš”: ë‘˜ ë‹¤ cmsë¡œ ì‹œì‘í•´ì•¼ í•¨!**

4. **"ë³€ê²½ì‚¬í•­ ì €ì¥" í´ë¦­**

5. **ì¬ë¡œê·¸ì¸** (ì„¤ì • ë³€ê²½ìœ¼ë¡œ ë¡œê·¸ì•„ì›ƒë¨)

---

### âœ… STEP 2: wp-config.php ê°•ì œ ì„¤ì • (3ë¶„)

**í˜¸ìŠ¤íŒ… íŒŒì¼ ê´€ë¦¬ì ë˜ëŠ” FTP ì ‘ì†**

1. **WordPress ë£¨íŠ¸ í´ë”** ì´ë™
2. **wp-config.php íŒŒì¼ ì—´ê¸°**
3. **`<?php` ë°”ë¡œ ì•„ë˜ì— ì¶”ê°€:**

```php
<?php
// ğŸ”¥ CORS ë¬¸ì œ í•´ê²° - ë„ë©”ì¸ ê°•ì œ ê³ ì •
define('WP_HOME', 'https://cms.pnamarketing.co.kr');
define('WP_SITEURL', 'https://cms.pnamarketing.co.kr');

// ... ê¸°ì¡´ ì½”ë“œ ê³„ì† ...
```

4. **ì €ì¥**

---

### âœ… STEP 3: CORS í—¤ë” ì¶”ê°€ (5ë¶„)

#### ë°©ë²• A: Code Snippets í”ŒëŸ¬ê·¸ì¸ (ê¶Œì¥)

1. **WordPress ê´€ë¦¬ì â†’ í”ŒëŸ¬ê·¸ì¸ â†’ ìƒˆë¡œ ì¶”ê°€**
2. **"Code Snippets" ê²€ìƒ‰ â†’ ì„¤ì¹˜ â†’ í™œì„±í™”**
3. **Snippets â†’ Add New**
4. **ì œëª©:** `CORS í—¤ë” ì„¤ì •`
5. **ì½”ë“œ ë¶™ì—¬ë„£ê¸°:**

```php
<?php
// CORS í—¤ë” - Elementor í¸ì§‘ê¸° ì—ëŸ¬ í•´ê²°
add_action('init', function() {
    $allowed_origins = array(
        'https://cms.pnamarketing.co.kr',
        'https://pnamarketing.co.kr'
    );
    
    $origin = isset($_SERVER['HTTP_ORIGIN']) ? $_SERVER['HTTP_ORIGIN'] : '';
    
    if (in_array($origin, $allowed_origins)) {
        header("Access-Control-Allow-Origin: $origin");
        header("Access-Control-Allow-Credentials: true");
        header("Access-Control-Allow-Methods: GET, POST, OPTIONS");
        header("Access-Control-Allow-Headers: Content-Type, Authorization");
    }
}, 1);

// Elementor í¸ì§‘ê¸° ì „ìš© ì—ëŸ¬ ë¬´ì‹œ
add_action('elementor/editor/before_enqueue_scripts', function() {
    ?>
    <script>
        // Cross-origin ì—ëŸ¬ ìë™ ì²˜ë¦¬
        window.addEventListener('error', function(e) {
            if (e.message && (e.message.includes('cross-origin') || e.message.includes('CORS'))) {
                console.log('âœ… CORS ì—ëŸ¬ ë¬´ì‹œë¨:', e.message);
                e.preventDefault();
                return true;
            }
        }, true);
        
        // SecurityError ë¬´ì‹œ
        window.addEventListener('unhandledrejection', function(e) {
            if (e.reason && e.reason.toString().includes('SecurityError')) {
                console.log('âœ… SecurityError ë¬´ì‹œë¨');
                e.preventDefault();
            }
        });
    </script>
    <?php
}, 1);
?>
```

6. **"Save Changes and Activate" í´ë¦­**

#### ë°©ë²• B: functions.php ì§ì ‘ í¸ì§‘

```
ì™¸ëª¨ â†’ í…Œë§ˆ íŒŒì¼ í¸ì§‘ê¸° â†’ functions.php
ìœ„ ì½”ë“œë¥¼ ë§¨ ëì— ì¶”ê°€
```

---

### âœ… STEP 4: Elementor ìºì‹œ ì¬ìƒì„± (1ë¶„)

1. **WordPress ê´€ë¦¬ì â†’ Elementor â†’ ë„êµ¬**
2. **"ì¼ë°˜" íƒ­:**
   - **"CSS íŒŒì¼ ì¬ìƒì„±"** í´ë¦­
   - **"ë°ì´í„° ë™ê¸°í™”"** í´ë¦­

---

### âœ… STEP 5: ë¸Œë¼ìš°ì € ìºì‹œ ì™„ì „ ì‚­ì œ (1ë¶„)

```
Chrome/Edge:
1. Ctrl + Shift + Delete
2. "ì „ì²´ ê¸°ê°„" ì„ íƒ
3. "ì¿ í‚¤ ë° ê¸°íƒ€ ì‚¬ì´íŠ¸ ë°ì´í„°" ì²´í¬
4. "ìºì‹œëœ ì´ë¯¸ì§€ ë° íŒŒì¼" ì²´í¬
5. "ë°ì´í„° ì‚­ì œ" í´ë¦­
```

---

### âœ… STEP 6: í…ŒìŠ¤íŠ¸ (1ë¶„)

1. **WordPress ì¬ë¡œê·¸ì¸:**
   ```
   https://cms.pnamarketing.co.kr/wp-admin
   ```

2. **Elementor í¸ì§‘ê¸° ì—´ê¸°:**
   ```
   í˜ì´ì§€ â†’ ëª¨ë“  í˜ì´ì§€ â†’ ì•„ë¬´ í˜ì´ì§€ â†’ "Elementorë¡œ í¸ì§‘"
   ```

3. **F12 â†’ Console í™•ì¸:**
   - âœ… CORS ì—ëŸ¬ ì—†ìŒ
   - âœ… SecurityError ì—†ìŒ
   - âœ… í¸ì§‘ê¸° ì •ìƒ ì‘ë™!

---

## ğŸ¯ Next.js í”„ë¡œì íŠ¸ ì„¤ì • (ë³´ë„ˆìŠ¤)

### .env.local íŒŒì¼ ìˆ˜ì •

í”„ë¡œì íŠ¸ ë£¨íŠ¸ì— `.env.local` íŒŒì¼ ìƒì„±/ìˆ˜ì •:

```bash
# CORS ë¬¸ì œ í•´ê²° - ë„ë©”ì¸ í†µì¼
WORDPRESS_API_URL=https://cms.pnamarketing.co.kr/graphql
WORDPRESS_REVALIDATE_SECRET=your-secret-token-here
NEXT_PUBLIC_SITE_URL=https://pnamarketing.co.kr
NEXT_PUBLIC_WORDPRESS_URL=https://cms.pnamarketing.co.kr
```

### ê°œë°œ ì„œë²„ ì¬ì‹œì‘

```bash
# í„°ë¯¸ë„ì—ì„œ
npm run dev
```

---

## âœ… ìµœì¢… ì²´í¬ë¦¬ìŠ¤íŠ¸

ì™„ë£Œí•œ í•­ëª©ì— ì²´í¬í•˜ì„¸ìš”:

- [ ] **STEP 1:** WordPress ë„ë©”ì¸ ì„¤ì •ì„ cmsë¡œ í†µì¼
- [ ] **STEP 2:** wp-config.phpì— ë„ë©”ì¸ ê°•ì œ ì„¤ì • ì¶”ê°€
- [ ] **STEP 3:** CORS í—¤ë” ì½”ë“œ ì¶”ê°€ (Code Snippets)
- [ ] **STEP 4:** Elementor ìºì‹œ ì¬ìƒì„±
- [ ] **STEP 5:** ë¸Œë¼ìš°ì € ìºì‹œ ì™„ì „ ì‚­ì œ
- [ ] **STEP 6:** Elementor í¸ì§‘ê¸° í…ŒìŠ¤íŠ¸
- [ ] **ë³´ë„ˆìŠ¤:** Next.js .env.local ìˆ˜ì •
- [ ] **ë³´ë„ˆìŠ¤:** npm run dev ì¬ì‹œì‘

---

## ğŸ‰ ì„±ê³µ í™•ì¸

Elementor í¸ì§‘ê¸°ì—ì„œ:
- âœ… ì¢Œì¸¡ ìœ„ì ¯ íŒ¨ë„ì´ ì •ìƒ í‘œì‹œë¨
- âœ… ë“œë˜ê·¸ ì•¤ ë“œë¡­ì´ ì‘ë™í•¨
- âœ… ì €ì¥ ë²„íŠ¼ì´ ì‘ë™í•¨
- âœ… F12 Consoleì— CORS ì—ëŸ¬ ì—†ìŒ
- âœ… SecurityError ì—†ìŒ

---

## ğŸ†˜ ì—¬ì „íˆ ì•ˆ ë  ë•Œ

### ì¶”ê°€ ì§„ë‹¨ ì •ë³´ ìˆ˜ì§‘:

1. **WordPress ì„¤ì • â†’ ì¼ë°˜ ìŠ¤í¬ë¦°ìƒ·**
   - WordPress ì£¼ì†Œ(URL) ê°’
   - ì‚¬ì´íŠ¸ ì£¼ì†Œ(URL) ê°’

2. **F12 â†’ Consoleì˜ ëª¨ë“  ì—ëŸ¬ ë³µì‚¬**
   - ë¹¨ê°„ìƒ‰ ì—ëŸ¬ ë©”ì‹œì§€ ì „ì²´

3. **Elementor ë²„ì „ í™•ì¸**
   ```
   í”ŒëŸ¬ê·¸ì¸ â†’ ì„¤ì¹˜ëœ í”ŒëŸ¬ê·¸ì¸ â†’ Elementor ë²„ì „
   ```

4. **í™œì„± í…Œë§ˆ í™•ì¸**
   ```
   ì™¸ëª¨ â†’ í…Œë§ˆ â†’ í˜„ì¬ í…Œë§ˆ ì´ë¦„
   ```

5. **í˜¸ìŠ¤íŒ… í™˜ê²½**
   - Apache / Nginx / LiteSpeed?

---

## ğŸ’Š ìµœí›„ì˜ ìˆ˜ë‹¨: ë°ì´í„°ë² ì´ìŠ¤ ì§ì ‘ ìˆ˜ì •

**phpMyAdmin ì ‘ì† â†’ SQL ì‹¤í–‰:**

```sql
-- 1. í˜„ì¬ URL í™•ì¸
SELECT * FROM wp_options WHERE option_name IN ('siteurl', 'home');

-- 2. URL ê°•ì œ ë³€ê²½
UPDATE wp_options 
SET option_value = 'https://cms.pnamarketing.co.kr' 
WHERE option_name IN ('siteurl', 'home');

-- 3. í™•ì¸
SELECT * FROM wp_options WHERE option_name IN ('siteurl', 'home');
```

**âš ï¸ ë°ì´í„°ë² ì´ìŠ¤ ë°±ì—… í•„ìˆ˜!**

---

ì´ì œ ì™„ì „íˆ í•´ê²°ë©ë‹ˆë‹¤! ğŸ’ªğŸ‰








