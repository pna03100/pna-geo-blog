# 🔥 안전 모드 즉시 해결 (3단계만 하면 끝!)

## 🎯 가장 확실한 방법 순서대로

CSS 폴더는 브라우저 주소창으로 접근할 수 없습니다!
아래 방법을 순서대로 시도하세요.

---

## ⚡ 방법 1: 데이터베이스 직접 수정 (가장 강력! - 5분)

### 단계 1: phpMyAdmin 접속 방법

#### 방법 A: cPanel에서 접속
```
1. 호스팅 업체 웹사이트 로그인
   (예: Cafe24, 가비아, Bluehost 등)

2. "cPanel" 또는 "관리 패널" 클릭

3. "데이터베이스" 섹션 찾기

4. "phpMyAdmin" 아이콘 클릭
```

#### 방법 B: 직접 URL로 접속
```
브라우저 주소창에 입력:

https://cms.pnamarketing.co.kr:2083
또는
https://호스팅주소/phpmyadmin
또는
https://호스팅주소:2083/cpsess번호/phpMyAdmin
```

#### 방법 C: 호스팅 업체별 접속 방법

**Cafe24:**
```
Cafe24 관리콘솔 → 나의 서비스 관리 → 웹호스팅 관리
→ MySQL 관리 → phpMyAdmin 접속
```

**가비아:**
```
My가비아 → 서비스 관리 → 호스팅 관리
→ MySQL 관리 → phpMyAdmin
```

**AWS, Vultr 등:**
```
SSH 접속 필요 (아래 방법 3 참조)
```

### 단계 2: SQL 코드 실행

phpMyAdmin 접속 후:

1. **왼쪽 목록에서 WordPress 데이터베이스 클릭**
   - 보통: `wp_`, `wordpress_`, `cms_` 등으로 시작

2. **상단 메뉴에서 "SQL" 탭 클릭**

3. **아래 코드 전체 복사 → 붙여넣기:**

```sql
-- 안전 모드 완전 제거
DELETE FROM wp_usermeta WHERE meta_key LIKE '%safe%mode%';
DELETE FROM wp_usermeta WHERE meta_key LIKE '%elementor%safe%';
DELETE FROM wp_options WHERE option_name LIKE '%safe%mode%';
DELETE FROM wp_options WHERE option_name LIKE '%elementor%safe%';
DELETE FROM wp_options WHERE option_name LIKE '_transient%safe%';

-- 모든 사용자의 Elementor 설정 초기화
DELETE FROM wp_usermeta WHERE meta_key LIKE 'elementor_preferences%';

SELECT '✅ 완료!' AS Result;
```

**⚠️ 중요:** 테이블 이름 확인!
- 왼쪽 목록에서 `_usermeta`, `_options`로 끝나는 테이블 찾기
- `wp_` 대신 다른 접두사라면 코드에서 수정

4. **"실행" 또는 "Go" 버튼 클릭**

5. **결과 확인:**
   ```
   ✅ "Query OK" 또는 "쿼리 성공" 메시지
   ```

### 단계 3: 테스트

1. **브라우저 캐시 완전 삭제:**
   ```
   Ctrl + Shift + Delete
   → "전체 기간" 선택
   → 모든 항목 체크
   → "데이터 삭제"
   ```

2. **새 시크릿 창으로 접속:**
   ```
   Ctrl + Shift + N (Chrome)
   → https://cms.pnamarketing.co.kr/wp-admin
   → Elementor 편집기 열기
   ```

3. **확인:**
   - ✅ 안전 모드 없음!

---

## ⚡ 방법 2: Code Snippets 플러그인 (phpMyAdmin 접근 불가 시)

### 단계 1: Code Snippets 설치

```
1. WordPress 관리자 → 플러그인 → 새로 추가
2. "Code Snippets" 검색
3. 설치 → 활성화
```

### 단계 2: 새 스니펫 추가

```
Snippets → Add New
제목: 안전 모드 제거
```

### 단계 3: 코드 붙여넣기

```php
<?php
// 안전 모드 완전 제거 및 차단
add_action('admin_init', function() {
    global $wpdb;
    
    // 데이터베이스에서 안전 모드 플래그 삭제
    $wpdb->query("DELETE FROM {$wpdb->usermeta} WHERE meta_key LIKE '%safe%mode%'");
    $wpdb->query("DELETE FROM {$wpdb->usermeta} WHERE meta_key LIKE '%elementor%safe%'");
    $wpdb->query("DELETE FROM {$wpdb->options} WHERE option_name LIKE '%safe%mode%'");
    $wpdb->query("DELETE FROM {$wpdb->options} WHERE option_name LIKE '%elementor%safe%'");
    $wpdb->query("DELETE FROM {$wpdb->options} WHERE option_name LIKE '_transient%safe%'");
    
    // 모든 쿠키 삭제
    $cookies = ['elementor_safe_mode', 'elementor-safe-mode', 'elementorSafeMode'];
    foreach ($cookies as $cookie) {
        if (isset($_COOKIE[$cookie])) {
            setcookie($cookie, '', time() - 3600, '/', '', true, true);
            unset($_COOKIE[$cookie]);
        }
    }
}, 1);

// Elementor 편집기 설정 강제 변경
add_filter('elementor/editor/localize_settings', function($settings) {
    if (isset($settings['initial_document']['safe_mode'])) {
        $settings['initial_document']['safe_mode'] = false;
    }
    if (isset($settings['document']['safe_mode'])) {
        $settings['document']['safe_mode'] = false;
    }
    $settings['safe_mode'] = false;
    return $settings;
}, 999);

// JavaScript로 안전 모드 완전 차단
add_action('elementor/editor/before_enqueue_scripts', function() {
    ?>
    <script>
    // 안전 모드 강제 비활성화
    (function() {
        if (typeof elementorCommon !== 'undefined') {
            elementorCommon.config = elementorCommon.config || {};
            elementorCommon.config.safe_mode = false;
        }
        if (typeof elementor !== 'undefined') {
            elementor.config = elementor.config || {};
            elementor.config.safe_mode = false;
        }
        
        // 쿠키 삭제
        document.cookie.split(";").forEach(function(c) {
            var name = c.split("=")[0].trim();
            if (name.includes('elementor') && name.includes('safe')) {
                document.cookie = name + "=;expires=Thu, 01 Jan 1970 00:00:00 UTC;path=/;";
            }
        });
        
        // 로컬 스토리지 삭제
        Object.keys(localStorage).forEach(function(key) {
            if (key.includes('elementor') && key.includes('safe')) {
                localStorage.removeItem(key);
            }
        });
        
        console.log('✅ 안전 모드 차단 완료!');
    })();
    </script>
    <?php
}, 1);

// URL 파라미터 제거
add_action('admin_init', function() {
    if (isset($_GET['elementor-mode']) || isset($_GET['safe-mode'])) {
        wp_safe_redirect(remove_query_arg(['elementor-mode', 'safe-mode']));
        exit;
    }
}, 1);
?>
```

### 단계 4: 활성화

```
"Save Changes and Activate" 클릭
```

### 단계 5: 테스트

```
1. 브라우저 캐시 삭제
2. WordPress 재로그인
3. Elementor 편집기 열기
```

---

## ⚡ 방법 3: SSH/WP-CLI (고급 사용자)

SSH 접근이 가능하다면:

```bash
# WordPress 폴더로 이동
cd /var/www/html  # 또는 WordPress 경로

# WP-CLI 설치 확인
wp --info

# 안전 모드 데이터 삭제
wp db query "DELETE FROM wp_usermeta WHERE meta_key LIKE '%safe%mode%';"
wp db query "DELETE FROM wp_options WHERE option_name LIKE '%safe%mode%';"

# CSS 캐시 삭제
wp elementor flush-css

# 권한 재설정
chmod -R 755 wp-content/uploads/elementor/

echo "✅ 완료!"
```

---

## 📋 호스팅 업체별 phpMyAdmin 접속 방법

### Cafe24
```
1. Cafe24 관리콘솔 (https://my.cafe24.com)
2. 나의 서비스 관리
3. 웹호스팅 관리
4. MySQL 관리 → phpMyAdmin 접속
```

### 가비아
```
1. My가비아 (https://my.gabia.com)
2. 서비스 관리
3. 호스팅 관리
4. MySQL 관리 → phpMyAdmin
```

### Bluehost
```
1. Bluehost 제어판
2. Advanced → phpMyAdmin
```

### SiteGround
```
1. Site Tools
2. Site → MySQL → phpMyAdmin
```

### AWS/Vultr/DigitalOcean
```
SSH 접속 필요 (방법 3 사용)
```

### 잘 모르겠다면
```
호스팅 업체 이름을 알려주시면 
구체적인 접속 방법을 안내해드리겠습니다!
```

---

## ✅ 체크리스트

순서대로 체크하며 진행:

- [ ] 방법 1: phpMyAdmin 접속 시도
  - [ ] phpMyAdmin 접속 성공
  - [ ] SQL 코드 실행
  - [ ] "Query OK" 메시지 확인
- [ ] 브라우저 캐시 완전 삭제
- [ ] 새 시크릿 창으로 테스트
- [ ] 안전 모드 해제 확인

**방법 1이 안 되면:**
- [ ] 방법 2: Code Snippets 설치
- [ ] PHP 코드 추가 및 활성화
- [ ] 브라우저 재시작
- [ ] Elementor 편집기 테스트

---

## 💬 현재 상황을 알려주세요

### 질문 1: phpMyAdmin 접속이 가능한가요?
- [ ] 네, 접속할 수 있어요
- [ ] 아니요, 접속 방법을 모르겠어요
- [ ] 아니요, 접속 권한이 없어요

### 질문 2: 호스팅 업체가 어디인가요?
```
(예: Cafe24, 가비아, AWS, Bluehost 등)
```

### 질문 3: Code Snippets 플러그인 설치가 가능한가요?
- [ ] 네, WordPress 관리자 접속 가능해요
- [ ] 아니요, WordPress 접속도 안 돼요

---

**이 정보를 알려주시면 정확한 단계별 가이드를 드리겠습니다!** 😊💪



